{"ast":null,"code":"var _jsxFileName = \"C:\\\\curso react 2\\\\ecommerce-ngelabert\\\\src\\\\components\\\\checkout\\\\Checkout.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useCartContext } from '../../context/CartContext';\nimport CartForm from '../cart/CartForm';\nimport { getFirestore } from '../utils/getFirebase';\nimport firebase from 'firebase';\nimport { NavLink } from 'react-router-dom';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Checkout = () => {\n  _s();\n\n  const [orderData, setOrderData] = useState({});\n  const {\n    clearCart,\n    cart\n  } = useCartContext();\n  const [cartOrder, setCartOrder] = useState([]);\n  const history = useHistory();\n  const total = 0;\n  let totalShop = 0;\n  const [formData, setFormData] = useState(initialState);\n  const inputs = [{\n    type: \"text\",\n    name: \"name\",\n    placeholder: \"ingrese su nombre\",\n    value: formData.name,\n    label: \"Nombre\"\n  }, {\n    type: \"text\",\n    name: \"lastname\",\n    placeholder: \"ingrese su apellido\",\n    value: formData.lastname,\n    label: \"Apellido\"\n  }, {\n    type: \"text\",\n    name: \"phone\",\n    placeholder: \"ingrese su telefono\",\n    value: formData.phone,\n    label: \"Número de teléfono\"\n  }, {\n    type: \"email\",\n    id: \"email\",\n    name: \"email\",\n    placeholder: \"ingrese su email\",\n    value: formData.email,\n    label: \"Email\"\n  }, {\n    type: \"email\",\n    id: \"emailconfirmation\",\n    name: \"emailconfirmation\",\n    placeholder: \"reingrese su email\",\n    label: \"Confirmá tu email\"\n  }];\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    if (document.getElementById(\"email\") === document.getElementById(\"emailconfirmation\")) {\n      const newOrder = {\n        date: firebase.firestore.Timestamp.fromDate(new Date()),\n        buyer: formData,\n        item: cart,\n        total: total\n      };\n      const db = getFirestore();\n      const orderCollection = db.collection('order');\n      orderCollection.add(newOrder).then(resp => setOrderData(resp)).catch(err => console.log(err)).finally(setFormData(initialState), setCartOrder(cart), clearCart());\n    } else {\n      alert('Los emails no coinciden');\n    }\n  }\n\n  function redirect() {\n    history.push('/');\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [cart.length > 0 && /*#__PURE__*/_jsxDEV(CartForm, {\n      formData: formData,\n      setFormData: setFormData,\n      initialState: initialState,\n      total: total,\n      inputs: inputs,\n      handleSubmit: handleSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }, this), cart.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cartlistcontainer\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Gracias por tu compra.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Tu n\\xFAmero de orden es:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: orderData.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"mt-5\",\n          children: \"Resumen de compra\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 25\n        }, this), cartOrder.map(element => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"centrar mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: element.qty\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mx-3\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: element.item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 59\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: element.item.price\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 33\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-print-none\",\n          children: cartOrder.map(element => {\n            return totalShop = element.item.price * element.qty + totalShop;\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mt-3\",\n          children: [\"Total: $\", totalShop]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-5\",\n          children: /*#__PURE__*/_jsxDEV(NavLink, {\n            to: \"/\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-productos btn-lg px-4 gap-3 centrar\",\n              \"data-bs-container\": \"body\",\n              \"data-bs-toggle\": \"popover\",\n              \"data-bs-placement\": \"top\",\n              \"data-bs-content\": \"Top popover\",\n              children: \"volver al inicio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }, this), totalShop == null && redirect()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Checkout, \"aokJ9irGFcYGg17dkp4zY4ZxYr4=\", false, function () {\n  return [useCartContext, useHistory];\n});\n\n_c = Checkout;\nexport default Checkout;\nconst initialState = {\n  name: '',\n  lastname: '',\n  phone: '',\n  emai: ''\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"sources":["C:/curso react 2/ecommerce-ngelabert/src/components/checkout/Checkout.jsx"],"names":["React","useState","useCartContext","CartForm","getFirestore","firebase","NavLink","useHistory","Checkout","orderData","setOrderData","clearCart","cart","cartOrder","setCartOrder","history","total","totalShop","formData","setFormData","initialState","inputs","type","name","placeholder","value","label","lastname","phone","id","email","handleSubmit","e","preventDefault","document","getElementById","newOrder","date","firestore","Timestamp","fromDate","Date","buyer","item","db","orderCollection","collection","add","then","resp","catch","err","console","log","finally","alert","redirect","push","length","map","element","qty","price","emai"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport { useCartContext } from '../../context/CartContext';\r\nimport CartForm from '../cart/CartForm'\r\nimport { getFirestore } from '../utils/getFirebase'\r\nimport firebase from 'firebase'\r\nimport { NavLink } from 'react-router-dom';\r\nimport {  useHistory } from 'react-router-dom';\r\n\r\nconst Checkout = () => {\r\n    const [orderData, setOrderData] = useState({})\r\n    const { clearCart, cart } = useCartContext()\r\n    const [cartOrder, setCartOrder] = useState([])\r\n    const history = useHistory();\r\n    \r\n    const total = 0;\r\n    let totalShop = 0;\r\n\r\n    const [formData, setFormData] = useState(initialState)\r\n    const inputs = [\r\n        {type:\"text\", name:\"name\", placeholder:\"ingrese su nombre\", value: formData.name, label: \"Nombre\"},\r\n        {type:\"text\", name:\"lastname\", placeholder:\"ingrese su apellido\", value: formData.lastname, label: \"Apellido\"},\r\n        {type:\"text\", name:\"phone\", placeholder:\"ingrese su telefono\", value: formData.phone, label: \"Número de teléfono\"},\r\n        {type:\"email\", id: \"email\", name:\"email\", placeholder:\"ingrese su email\", value: formData.email, label: \"Email\"},\r\n        {type:\"email\", id:\"emailconfirmation\", name:\"emailconfirmation\", placeholder:\"reingrese su email\", label: \"Confirmá tu email\"}\r\n    ]\r\n    \r\n    function handleSubmit(e){\r\n        e.preventDefault();\r\n        if (document.getElementById(\"email\") === document.getElementById(\"emailconfirmation\")) { \r\n            const newOrder = {\r\n                date: firebase.firestore.Timestamp.fromDate(new Date()),\r\n                buyer: formData,\r\n                item: cart,\r\n                total: total,\r\n            }\r\n            const db = getFirestore();\r\n            const orderCollection = db.collection('order');\r\n            orderCollection\r\n            .add(newOrder)\r\n            .then(resp => setOrderData(resp))\r\n            .catch(err => console.log(err))\r\n            .finally(\r\n                setFormData(initialState),\r\n                setCartOrder(cart),\r\n                clearCart(),\r\n            )\r\n        }else{\r\n            alert('Los emails no coinciden')\r\n        }\r\n    }\r\n    function redirect(){\r\n        history.push('/')\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {cart.length > 0 &&\r\n                <CartForm\r\n                formData={formData}\r\n                setFormData={setFormData}\r\n                initialState={initialState}\r\n                total={total}\r\n                inputs={inputs}\r\n                handleSubmit={handleSubmit}\r\n                />\r\n            }\r\n            {cart.length === 0 &&\r\n                <div className=\"cartlistcontainer\">\r\n                     \r\n                    <div>\r\n                        <h1>Gracias por tu compra.</h1>\r\n                        <h2>Tu número de orden es:</h2>\r\n                        <h3>{orderData.id}</h3>\r\n                        <h4 className=\"mt-5\">Resumen de compra</h4>\r\n                        {cartOrder.map((element) =>{\r\n                            return(\r\n                                <div className=\"centrar mt-3\">\r\n                                    <div><p>{element.qty}</p></div>\r\n                                    <div className=\"mx-3\"><p>{element.item.name}</p></div>\r\n                                    <div><p>{element.item.price}</p></div>                                \r\n                                </div>\r\n                        )})}<div className=\"d-print-none\">{cartOrder.map(element => {\r\n                            return totalShop = element.item.price * element.qty + totalShop} )}</div>\r\n                            <h3 className=\"mt-3\">Total: ${totalShop}</h3>\r\n                            <div className=\"mt-5\">\r\n                            <NavLink to=\"/\">\r\n                            <button type=\"button\" className=\"btn btn-productos btn-lg px-4 gap-3 centrar\" data-bs-container=\"body\" data-bs-toggle=\"popover\" data-bs-placement=\"top\" data-bs-content=\"Top popover\">volver al inicio</button>\r\n                            </NavLink>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            }\r\n            {totalShop == null && redirect()}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Checkout\r\n\r\nconst initialState = {\r\n    name: '',\r\n    lastname: '',\r\n    phone: '',\r\n    emai:''\r\n}"]},"metadata":{},"sourceType":"module"}