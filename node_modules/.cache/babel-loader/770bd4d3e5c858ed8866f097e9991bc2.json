{"ast":null,"code":"import _objectSpread from\"C:/curso react 2/ecommerce-ngelabert/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/curso react 2/ecommerce-ngelabert/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import ItemDetail from'./ItemDetail';import'./body.css';import Loader from'../loader/Loader';import{useParams}from'react-router-dom';import{useCartContext}from'../../context/CartContext';import{getFirestore}from'../utils/getFirebase';import{jsx as _jsx}from\"react/jsx-runtime\";var ItemDetailContainer=function ItemDetailContainer(_ref){var item=_ref.item;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),animalDetail=_useState4[0],setAnimalDetail=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),categories=_useState6[0],setCategories=_useState6[1];var _useParams=useParams(),id=_useParams.id;var _useCartContext=useCartContext(),addItem=_useCartContext.addItem;var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),clicked=_useState8[0],setClicked=_useState8[1];var onAdd=function onAdd(qty){return function(){addItem(animalDetail,qty);setClicked(true);};};useEffect(function(){var db=getFirestore();var itemCollection=db.collection('items');itemCollection.doc(id).get().then(function(doc){setAnimalDetail(_objectSpread({id:doc.id},doc.data()));setLoading(false);}).catch(function(err){return console.log(err);}).finally(function(){setLoading(false);});},[id]);useEffect(function(){var db=getFirestore();db.collection('categorias').get().then(function(querySnapshot){if(querySnapshot.size!==0){setCategories(querySnapshot.docs.map(function(cat){return _objectSpread({id:cat.id},cat.data());}));setLoading(false);}}).catch(function(err){return console.log(err);}).finally(function(){setLoading(false);});},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"container px-4 my-5 text-center\",children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(ItemDetail,{animalDetail:animalDetail,categories:categories,onAdd:onAdd,clicked:clicked})});};export default ItemDetailContainer;","map":{"version":3,"sources":["C:/curso react 2/ecommerce-ngelabert/src/components/items/ItemDetailContainer.jsx"],"names":["React","useEffect","useState","ItemDetail","Loader","useParams","useCartContext","getFirestore","ItemDetailContainer","item","loading","setLoading","animalDetail","setAnimalDetail","categories","setCategories","id","addItem","clicked","setClicked","onAdd","qty","db","itemCollection","collection","doc","get","then","data","catch","err","console","log","finally","querySnapshot","size","docs","map","cat"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport ItemDetail from './ItemDetail';\r\nimport './body.css';\r\nimport Loader from '../loader/Loader';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useCartContext } from '../../context/CartContext';\r\nimport { getFirestore } from '../utils/getFirebase';\r\n\r\nconst ItemDetailContainer = ({item}) => {\r\n    const [loading, setLoading] = useState(true)\r\n    const [animalDetail, setAnimalDetail] = useState({})\r\n    const [categories, setCategories] = useState([]);\r\n    const {id} = useParams()\r\n    const {addItem} = useCartContext()\r\n    const [clicked, setClicked] = useState(false);\r\n    \r\n    const onAdd = (qty)=>{\r\n        return ()=>{\r\n            addItem(animalDetail, qty);\r\n            setClicked(true)\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const db = getFirestore();\r\n        const itemCollection = db.collection('items');\r\n        itemCollection\r\n        .doc(id)\r\n        .get()\r\n        .then((doc) =>{\r\n            setAnimalDetail({ id: doc.id, ...doc.data() })\r\n            setLoading(false)\r\n        })\r\n        .catch(err => console.log(err))\r\n        .finally(() => {setLoading(false)});\r\n    }, [id])\r\n\r\n    useEffect(() => {\r\n        const db = getFirestore();\r\n        db.collection('categorias')\r\n        .get()\r\n        .then(querySnapshot => {\r\n            if(querySnapshot.size !== 0){\r\n                setCategories(querySnapshot.docs.map(cat => ({id:cat.id, ...cat.data()})))\r\n                setLoading(false);\r\n            }\r\n        })\r\n        .catch(err => console.log(err))\r\n        .finally(() => {setLoading(false)});\r\n        },[])\r\n\r\n    return (\r\n        <div className=\"container px-4 my-5 text-center\">\r\n            {\r\n            loading\r\n            ?\r\n            <Loader/>\r\n            :\r\n            <ItemDetail animalDetail={animalDetail} \r\n            categories={categories}\r\n            onAdd={onAdd} clicked={clicked} />\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ItemDetailContainer\r\n"]},"metadata":{},"sourceType":"module"}