{"ast":null,"code":"import _slicedToArray from\"C:/curso react 2/ecommerce-ngelabert/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useCartContext}from'../../context/CartContext';import CartForm from'../cart/CartForm';import{getFirestore}from'../utils/getFirebase';import firebase from'firebase';import{NavLink}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Checkout=function Checkout(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),orderData=_useState2[0],setOrderData=_useState2[1];var _useCartContext=useCartContext(),clearCart=_useCartContext.clearCart,cart=_useCartContext.cart;var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cartOrder=_useState4[0],setCartOrder=_useState4[1];var total=0;var totalShop=0;var _useState5=useState(initialState),_useState6=_slicedToArray(_useState5,2),formData=_useState6[0],setFormData=_useState6[1];var inputs=[{type:\"text\",id:\"name\",name:\"name\",placeholder:\"ingrese su nombre\",value:formData.name,label:\"Nombre\"},{type:\"text\",id:\"lastname\",name:\"lastname\",placeholder:\"ingrese su apellido\",value:formData.lastname,label:\"Apellido\"},{type:\"text\",id:\"phone\",name:\"phone\",placeholder:\"ingrese su telefono\",value:formData.phone,label:\"Número de teléfono\"},{type:\"email\",id:\"email\",name:\"email\",placeholder:\"ingrese su email\",value:formData.email,label:\"Email\"},{type:\"email\",id:\"emailconfirmation\",name:\"emailconfirmation\",placeholder:\"reingrese su email\",label:\"Confirmá tu email\"}];function handleSubmit(e){e.preventDefault();if(document.getElementById(\"email\").value===document.getElementById(\"emailconfirmation\").value){var newOrder={date:firebase.firestore.Timestamp.fromDate(new Date()),buyer:formData,item:cart,total:total};var db=getFirestore();var orderCollection=db.collection('order');orderCollection.add(newOrder).then(function(resp){return setOrderData(resp);}).catch(function(err){return console.log(err);}).finally(setFormData(initialState),setCartOrder(cart),clearCart());}else{alert('Los emails no coinciden');}}return/*#__PURE__*/_jsxs(\"div\",{children:[cart.length>0&&/*#__PURE__*/_jsx(CartForm,{formData:formData,setFormData:setFormData,initialState:initialState,total:total,inputs:inputs,handleSubmit:handleSubmit}),cart.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"cartlistcontainer\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Gracias por tu compra.\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Tu n\\xFAmero de orden es:\"}),/*#__PURE__*/_jsx(\"h3\",{children:orderData.id}),/*#__PURE__*/_jsx(\"h4\",{className:\"mt-5\",children:\"Resumen de compra\"}),cartOrder.map(function(element){return/*#__PURE__*/_jsxs(\"div\",{className:\"centrar mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:element.qty})}),/*#__PURE__*/_jsx(\"div\",{className:\"mx-3\",children:/*#__PURE__*/_jsx(\"p\",{children:element.item.name})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:element.item.price})})]});}),/*#__PURE__*/_jsx(\"div\",{className:\"d-print-none\",children:cartOrder.map(function(element){return totalShop=element.item.price*element.qty+totalShop;})}),/*#__PURE__*/_jsxs(\"h3\",{className:\"mt-3\",children:[\"Total: $\",totalShop]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-5\",children:/*#__PURE__*/_jsx(NavLink,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-productos btn-lg px-4 gap-3 centrar\",\"data-bs-container\":\"body\",\"data-bs-toggle\":\"popover\",\"data-bs-placement\":\"top\",\"data-bs-content\":\"Top popover\",children:\"volver al inicio\"})})})]})})]});};export default Checkout;var initialState={name:'',lastname:'',phone:'',emai:''};","map":{"version":3,"sources":["C:/curso react 2/ecommerce-ngelabert/src/components/checkout/Checkout.jsx"],"names":["React","useState","useCartContext","CartForm","getFirestore","firebase","NavLink","Checkout","orderData","setOrderData","clearCart","cart","cartOrder","setCartOrder","total","totalShop","initialState","formData","setFormData","inputs","type","id","name","placeholder","value","label","lastname","phone","email","handleSubmit","e","preventDefault","document","getElementById","newOrder","date","firestore","Timestamp","fromDate","Date","buyer","item","db","orderCollection","collection","add","then","resp","catch","err","console","log","finally","alert","length","map","element","qty","price","emai"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport { useCartContext } from '../../context/CartContext';\r\nimport CartForm from '../cart/CartForm'\r\nimport { getFirestore } from '../utils/getFirebase'\r\nimport firebase from 'firebase'\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst Checkout = () => {\r\n    const [orderData, setOrderData] = useState({})\r\n    const { clearCart, cart } = useCartContext()\r\n    const [cartOrder, setCartOrder] = useState([])\r\n    \r\n    const total = 0;\r\n    let totalShop = 0;\r\n\r\n    const [formData, setFormData] = useState(initialState)\r\n    const inputs = [\r\n        {type:\"text\", id:\"name\", name:\"name\", placeholder:\"ingrese su nombre\", value: formData.name, label: \"Nombre\"},\r\n        {type:\"text\", id:\"lastname\", name:\"lastname\", placeholder:\"ingrese su apellido\", value: formData.lastname, label: \"Apellido\"},\r\n        {type:\"text\", id:\"phone\", name:\"phone\", placeholder:\"ingrese su telefono\", value: formData.phone, label: \"Número de teléfono\"},\r\n        {type:\"email\", id: \"email\", name:\"email\", placeholder:\"ingrese su email\", value: formData.email, label: \"Email\"},\r\n        {type:\"email\", id:\"emailconfirmation\", name:\"emailconfirmation\", placeholder:\"reingrese su email\", label: \"Confirmá tu email\"}\r\n    ]\r\n    \r\n    function handleSubmit(e){\r\n        e.preventDefault();\r\n        if (document.getElementById(\"email\").value === document.getElementById(\"emailconfirmation\").value) { \r\n            const newOrder = {\r\n                date: firebase.firestore.Timestamp.fromDate(new Date()),\r\n                buyer: formData,\r\n                item: cart,\r\n                total: total,\r\n            }\r\n            const db = getFirestore();\r\n            const orderCollection = db.collection('order');\r\n            orderCollection\r\n            .add(newOrder)\r\n            .then(resp => setOrderData(resp))\r\n            .catch(err => console.log(err))\r\n            .finally(\r\n                setFormData(initialState),\r\n                setCartOrder(cart),\r\n                clearCart(),\r\n            )\r\n        }else{\r\n            alert('Los emails no coinciden')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {cart.length > 0 &&\r\n                <CartForm\r\n                formData={formData}\r\n                setFormData={setFormData}\r\n                initialState={initialState}\r\n                total={total}\r\n                inputs={inputs}\r\n                handleSubmit={handleSubmit}\r\n                />\r\n            }\r\n            {cart.length === 0 &&\r\n                <div className=\"cartlistcontainer\">\r\n                     \r\n                    <div>\r\n                        <h1>Gracias por tu compra.</h1>\r\n                        <h2>Tu número de orden es:</h2>\r\n                        <h3>{orderData.id}</h3>\r\n                        <h4 className=\"mt-5\">Resumen de compra</h4>\r\n                        {cartOrder.map((element) =>{\r\n                            return(\r\n                                <div className=\"centrar mt-3\">\r\n                                    <div><p>{element.qty}</p></div>\r\n                                    <div className=\"mx-3\"><p>{element.item.name}</p></div>\r\n                                    <div><p>{element.item.price}</p></div>                                \r\n                                </div>\r\n                        )})}<div className=\"d-print-none\">{cartOrder.map(element => {\r\n                            return totalShop = element.item.price * element.qty + totalShop} )}</div>\r\n                            <h3 className=\"mt-3\">Total: ${totalShop}</h3>\r\n                            <div className=\"mt-5\">\r\n                            <NavLink to=\"/\">\r\n                            <button type=\"button\" className=\"btn btn-productos btn-lg px-4 gap-3 centrar\" data-bs-container=\"body\" data-bs-toggle=\"popover\" data-bs-placement=\"top\" data-bs-content=\"Top popover\">volver al inicio</button>\r\n                            </NavLink>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Checkout\r\n\r\nconst initialState = {\r\n    name: '',\r\n    lastname: '',\r\n    phone: '',\r\n    emai:''\r\n}"]},"metadata":{},"sourceType":"module"}